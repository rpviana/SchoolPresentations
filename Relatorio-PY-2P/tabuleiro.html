<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tabuleiro.py</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>tabuleiro.py</h1>
        <p>Análise do código e o que ele faz.</p>
    </header>
    <main>
        <div class="description-container">
            <h2 style="display: block; text-align: center;">Introdução</h2>
            <ul style="padding-left: 20px;">
                <li style="margin-bottom: 10px;">
                    O arquivo <code>tabuleiro.py</code> contém a definição da classe <code>Tabuleiro</code>,  
                    que é responsável por representar o tabuleiro do jogo e por controlar as operações de desenho e controle de posições no tabuleiro.
                </li>
                <li style="margin-bottom: 10px;">
                    O código está estruturado de forma a permitir a criação de diferentes tipos de tabuleiro,  
                    com dois formatos:
                    <ul>
                        <li><code>piramide</code>: Um tabuleiro com formato triangular (pirâmide invertida), onde as linhas têm um número diferente de colunas.</li>
                        <li><code>normal</code>: Um tabuleiro com formato retangular (ou quadrado), onde todas as linhas possuem o mesmo número de colunas.</li>
                    </ul>
                </li>
                <li style="margin-bottom: 10px;">
                    As funcionalidades chave incluem:
                    <ul>
                        <li><code>_criar_tabuleiro</code>: Método interno que cria o tabuleiro, gera as posições conforme o tipo de tabuleiro selecionado.</li>
                        <li><code>desenhar</code>: Método que desenha o tabuleiro no terminal, exibindo assim as posições das naves e tiros feitos pelo jogador.</li>
                        <li><code>obter_posicao_valida</code>: Método que solicita ao jogador para inserir uma posição no tabuleiro, garantindo que a posição seja válida e dentro dos limites do tabuleiro.</li>
                        <li><code>posicionar_aleatorio</code>: Método que gera uma posição aleatória para as naves ou tiros, para jogadas automáticas.</li>
                    </ul>
                </li>
                <li style="margin-bottom: 10px;">
                    O <code>tabuleiro.py</code> também garante que o jogo tenha um controlo das posições,  
                    validando se as coordenadas inseridas são válidas e permitindo o desenho visual do tabuleiro no terminal.
                </li>
                <li style="margin-bottom: 10px;">
                    O arquivo oferece a flexibilidade de configurar diferentes tipos de tabuleiros e facilita a visualização do jogo,  
                    permitindo que os jogadores vejam claramente o estado atual das suas naves e os tiros disparados.
                </li>
            </ul>                                                                                                 
        </div>    
        <div class="code-container">
            <button class="copy-button" onclick="copyCode()">Copiar Código</button>
            <pre><code id="code-block">
#LINHA 3 À 9
class Tabuleiro:
    def __init__(self, tipo):
        """
        Construtor da classe Tabuleiro. Aqui é onde escolhes se o tabuleiro é normal ou uma pirâmide invertida.
        """
        self.tipo = tipo  # Guarda o tipo de tabuleiro que o jogador escolheu
        self.tabuleiro = self._criar_tabuleiro()  # Cria o tabuleiro com base no tipo escolhido
</code></pre>
        </div>
        <div class="description-container">
            <h2>Descrição</h2>
            <ul style="padding-left: 20px;">
                <li style="margin-bottom: 10px;">
                    Este trecho de código define a classe <code>Tabuleiro</code>, responsável por criar e gerir o tabuleiro do jogo.
                </li>
                <li style="margin-bottom: 10px;">
                    O construtor <code>__init__</code> recebe um parâmetro <code>tipo</code>, que indica o tipo de tabuleiro escolhido pelo jogador (normal ou pirâmide invertida).
                </li>
                <li style="margin-bottom: 10px;">
                    Dentro do construtor, o atributo <code>self.tipo</code> armazena o tipo de tabuleiro (normal ou pirâmide) que o jogador selecionou.
                </li>
                <li style="margin-bottom: 10px;">
                    O atributo <code>self.tabuleiro</code> chama o método <code>_criar_tabuleiro</code> para criar o tabuleiro, passando a escolha do tipo. Esse método será responsável por gerar a estrutura do tabuleiro conforme o tipo escolhido.
                </li>
                <li style="margin-bottom: 10px;">
                    A função <code>_criar_tabuleiro</code> vai ter a lógica da criação do tabuleiro com base no tipo de tabuleiro, por exemplo, cria uma estrutura diferente para um tabuleiro "normal" e um "piramide", obviamente.
                </li>
            </ul>            
        </div>
        <div class="code-container">
            <button class="copy-button" onclick="copyCode()">Copiar Código</button>
            <pre><code id="code-block">
#LINHA 11 À 26
def _criar_tabuleiro(self):
        """
        Método interno (começa com '_') que desenha o layout do tabuleiro. 
        Se for pirâmide, faz o formato triangular; se for normal, faz uma grelha normal.
        """
        if self.tipo == "piramide":  # Pirâmide invertida
            return {1: ['A', 'B', 'C', 'D', 'E'],  # Linha 1 tem 5 colunas
                    2: ['B', 'C', 'D'],           # Linha 2 tem 3 colunas
                    3: ['C']}                    # Linha 3 só tem 1 coluna
        elif self.tipo == "normal":  # Tabuleiro padrão (quadrado)
            return {1: ['A', 'B', 'C'],          # Todas as linhas têm 3 colunas
                    2: ['A', 'B', 'C'],
                    3: ['A', 'B', 'C']}
        else:
            # Se o tipo de tabuleiro for algo estúpido, lança um erro para o utilizador saber.
            raise ValueError("Tipo de tabuleiro inválido.")
</code></pre>
        </div>
        <div class="description-container">
            <h2>Descrição</h2>
            <ul style="padding-left: 20px;">
                <li style="margin-bottom: 10px;">
                    Este método <code>_criar_tabuleiro</code> é um método interno (indicado pelo underscore "_")  
                    responsável por criar a estrutura do tabuleiro com base no tipo escolhido.
                </li>
                <li style="margin-bottom: 10px;">
                    O parâmetro <code>self.tipo</code> define qual tipo de tabuleiro será criado:
                    <ul>
                        <li><code>"piramide"</code>: Forma um tabuleiro em formato triangular invertido.</li>
                        <li><code>"normal"</code>: Forma um tabuleiro padrão em grelha 3x3 (quadrado).</li>
                    </ul>
                </li>
                <li style="margin-bottom: 10px;">
                    Se o tipo for <code>"piramide"</code>, o método retorna um dicionário onde:
                    <ul>
                        <li>A chave representa o número da linha.</li>
                        <li>O valor é uma lista de letras que representam as colunas dessa linha.</li>
                        <li>As linhas têm tamanhos diferentes, criando um efeito de pirâmide invertida.</li>
                    </ul>
                    Exemplo:
                    <pre>
                    1: ['A', 'B', 'C', 'D', 'E']
                    2: ['B', 'C', 'D']
                    3: ['C']
                    </pre>
                </li>
                <li style="margin-bottom: 10px;">
                    Se o tipo for <code>"normal"</code>, o método retorna um dicionário com um formato de grelha regular,  
                    onde todas as linhas têm o mesmo número de colunas.
                </li>
                <li style="margin-bottom: 10px;">
                    Se <code>self.tipo</code> tiver um valor inválido, o método lança um erro (<code>ValueError</code>)  
                    para alertar o jogar sobre a escolha incorreta.
                </li>
                <li style="margin-bottom: 10px;">
                    A <code>"piramide"</code>, não ficou lá bem como eu queria.
                </li>
            </ul>                       
        </div>
        <div class="code-container">
            <button class="copy-button" onclick="copyCode()">Copiar Código</button>
            <pre><code id="code-block">
#LINHA 28 À 70
def desenhar(self, naves_posicoes=None, tiros_posicoes=None):
        """
        Este método desenha os tabuleiros no terminal.
        - naves_posicoes mostra onde as naves estão.
        - tiros_posicoes marca os locais onde o jogador tentou acertar.
        """
        naves_posicoes = naves_posicoes or {}  # Se não houver naves, cria um dicionário vazio
        tiros_posicoes = tiros_posicoes or {}  # Se não houver tiros, cria um dicionário vazio

        colunas = list(self.tabuleiro.values())[0]  # Vai buscar as colunas da primeira linha (para alinhar tudo)
        largura_celula = 3  # Cada célula do tabuleiro vai ter 3 caracteres de largura

        # --- Tabuleiro das Naves ---
        print("Tabuleiro das Naves:")
        print("   " + " ".join(col.center(largura_celula) for col in colunas))  # Cabeçalho com letras A, B, C...
        for linha, colunas in self.tabuleiro.items():
            linha_separadora = "  +" + "+".join("-" * largura_celula for _ in list(self.tabuleiro.values())[0]) + "+"
            print(linha_separadora)  # Linha separadora (entre as células)
            linha_conteudo = f"{linha} |"  # Começa a desenhar a linha com o número (1, 2 ou 3)
            for coluna in list(self.tabuleiro.values())[0]:  # Passa por todas as colunas possíveis
                if coluna in colunas:  # Verifica se esta coluna pertence à linha
                    pos = (linha, coluna)
                    nave = naves_posicoes.get(pos, " ")  # Mostra a nave (se houver) ou deixa vazio
                else:
                    nave = " "  # Deixa o espaço vazio para alinhar tudo
                linha_conteudo += nave.center(largura_celula) + "|"  # Adiciona o conteúdo da célula
            print(linha_conteudo)
        print(linha_separadora)  # Linha final para fechar o tabuleiro

        # --- Tabuleiro de Tiros ---
        print("\nTabuleiro de Tiros:")
        print("   " + " ".join(col.center(largura_celula) for col in colunas))  # Cabeçalho igual ao das naves
        print("  +" + "+".join("-" * largura_celula for _ in colunas) + "+")  # Linha separadora
        for linha, colunas in self.tabuleiro.items():
            linha_conteudo = f"{linha} |"
            for coluna in colunas:
                pos = (linha, coluna)
                tiro = tiros_posicoes.get(pos, " ")  # Mostra um "X" se houver tiro, senão deixa vazio
                linha_conteudo += tiro.center(largura_celula) + "|"
            print(linha_conteudo)
            print("  +" + "+".join("-" * largura_celula for _ in colunas) + "+")  # Linha separadora

    @staticmethod
</code></pre>
        </div>
        <div class="description-container">
            <h2>Descrição</h2>
            <ul style="padding-left: 20px;">
                <li style="margin-bottom: 10px;">
                    O método <code>desenhar</code> exibe dois tabuleiros no terminal: 
                    <ul>
                        <li><strong>Tabuleiro das Naves</strong> → Mostra a posição das naves.</li>
                        <li><strong>Tabuleiro de Tiros</strong> → Marca onde os tiros foram disparados.</li>
                    </ul>
                </li>
                <li style="margin-bottom: 10px;">
                    Os parâmetros <code>naves_posicoes</code> e <code>tiros_posicoes</code> são dicionários opcionais  
                    que armazenam as posições das naves e dos tiros no tabuleiro.  
                    Se não forem fornecidos, são inicializados como dicionários vazios.
                </li>
                <li style="margin-bottom: 10px;">
                    O código obtém a lista de colunas a partir da primeira linha do tabuleiro  
                    (<code>list(self.tabuleiro.values())[0]</code>) para garantir(ou pelo menos tentar) o alinhamento correto.
                </li>
                <li style="margin-bottom: 10px;">
                    A variável <code>largura_celula</code> define a largura de cada célula do tabuleiro (3 caracteres).
                </li>
                <li style="margin-bottom: 10px;">
                    <strong>Desenho do Tabuleiro das Naves:</strong>
                    <ul>
                        <li>Imprime um cabeçalho com as letras das colunas.</li>
                        <li>Cria linhas separadoras para manter a estrutura do tabuleiro.</li>
                        <li>mexe sobre as linhas e colunas do tabuleiro, preenchendo as células com:
                            <ul>
                                <li>Uma nave, se existir (<code>naves_posicoes.get(pos, " ")</code>).</li>
                                <li>Um espaço vazio, se não houver nave.</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li style="margin-bottom: 10px;">
                    <strong>Desenho do Tabuleiro de Tiros:</strong>
                    <ul>
                        <li>Segue a mesma lógica do tabuleiro das naves.</li>
                        <li>Em vez de mostrar naves, preenche com "X" caso tenha sido efetuado um tiro naquela posição.</li>
                    </ul>
                </li>
                <li style="margin-bottom: 10px;">
                    <strong>Usei um pouco de GPT para implementar isso também.</strong>
                </li>
            </ul>                                   
        </div>
        <div class="code-container">
            <button class="copy-button" onclick="copyCode()">Copiar Código</button>
            <pre><code id="code-block">
#LINHA 71 À 93
def obter_posicao_valida(tabuleiro):
"""
Pede ao jogador para introduzir uma posição e verifica se é válida.
Garante que o input segue o formato correto (letra + número).
"""
while True:
    posicao = input("Escolha uma posição (exemplo: A1): ").upper()  # Converte para maiúsculas
    if len(posicao) < 2:  # Verifica se o input tem pelo menos 2 caracteres
        print("Posição inválida. Use o formato 'LetraNúmero'. Tente novamente.")
        continue
    coluna = posicao[0]  # Primeiro carácter é a coluna (A, B, etc.)
    try:
        linha = int(posicao[1:])  # Os restantes são a linha (1, 2, etc.)
    except ValueError:
        print("Linha inválida. Tente novamente.")
        continue
    if linha not in tabuleiro.tabuleiro:  # Verifica se a linha existe no tabuleiro
        print(f"A linha {linha} não existe no tabuleiro. Tente novamente.")
        continue
    if coluna not in tabuleiro.tabuleiro[linha]:  # Verifica se a coluna está na linha
        print(f"A coluna {coluna} não existe na linha {linha}. Tente novamente.")
        continue
    return linha, coluna  # Se tudo estiver certo, devolve a linha e a coluna
</code></pre>
        </div>
        <div class="description-container">
            <h2>Descrição</h2>
            <ul style="padding-left: 20px;">
                <li style="margin-bottom: 10px;">
                    O método <code>obter_posicao_valida</code> solicita ao jogador que insira uma posição  
                    e valida se o formato e a posição são corretos antes de retornar o valor.
                </li>
                <li style="margin-bottom: 10px;">
                    O input do jogador é convertido para maiúsculas com <code>.upper()</code>,  
                    garantindo que as letras sejam sempre reconhecidas corretamente e sejam mais giras.
                </li>
                <li style="margin-bottom: 10px;">
                    O código entra num ciclo <code>while True</code> para continuar pedindo uma posição  
                    até que o jogador forneça um valor válido.
                </li>
                <li style="margin-bottom: 10px;">
                    Primeira verificação: O código garante que o input tem pelo menos dois caracteres  
                    (<code>if len(posicao) &lt; 2</code>). Se for inválido, mostra uma mensagem e pede um novo input.
                </li>
                <li style="margin-bottom: 10px;">
                    O primeiro carácter da entrada (<code>posicao[0]</code>) representa a <strong>coluna</strong>.
                </li>
                <li style="margin-bottom: 10px;">
                    O restante da string (<code>posicao[1:]</code>) é convertido em inteiro para representar a <strong>linha</strong>.  
                    <ul>
                        <li>Se a conversão falhar (<code>ValueError</code>), significa que o jogador não digitou um número válido.</li>
                        <li>Nesse caso, exibe uma mensagem de erro e pede novamente a posição.</li>
                    </ul>
                </li>
                <li style="margin-bottom: 10px;">
                    O código verifica se a linha existe no tabuleiro (<code>linha not in tabuleiro.tabuleiro</code>).  
                    Se não existir, exibe uma mensagem de erro e reinicia o processo.
                </li>
                <li style="margin-bottom: 10px;">
                    Em seguida, verifica se a coluna fornecida está presente na linha escolhida.  
                    Se não estiver, exibe um erro indicando que aquela coluna não faz parte da linha.
                </li>
                <li style="margin-bottom: 10px;">
                    Quando a entrada é validada corretamente, o código retorna uma tupla <code>(linha, coluna)</code>  
                    com a posição escolhida pelo jogador.
                </li>
            </ul>                                               
        </div>
        <div class="code-container">
            <button class="copy-button" onclick="copyCode()">Copiar Código</button>
            <pre><code id="code-block">
#LINHA 95 À 101
def posicionar_aleatorio(self):
"""
Gera uma posição aleatória no tabuleiro. Este método é para as jogadas automáticas ou para posicionar naves.
"""
linha = random.choice(list(self.tabuleiro.keys()))  # Escolhe uma linha aleatória (1, 2 ou 3)
coluna = random.choice(self.tabuleiro[linha])  # Escolhe uma coluna dentro dessa linha
return (linha, coluna)  # Retorna a posição como uma tupla
</code></pre>
        </div>
        <div class="description-container">
            <h2>Descrição</h2>
            <ul style="padding-left: 20px;">
                <li style="margin-bottom: 10px;">
                    O método <code>posicionar_aleatorio</code> gera uma posição aleatória dentro do tabuleiro,  
                    para as jogadas automáticas e posicionamento de naves.
                </li>
                <li style="margin-bottom: 10px;">
                    O código usa a função <code>random.choice()</code> para selecionar aleatoriamente  
                    uma linha do tabuleiro.  
                    <ul>
                        <li>A função <code>list(self.tabuleiro.keys())</code> cria uma lista  
                            com as chaves do dicionário <code>tabuleiro</code>,  
                            que representam os números das linhas disponíveis.</li>
                        <li>Um valor aleatório dessa lista é escolhido para definir a linha.</li>
                    </ul>
                </li>
                <li style="margin-bottom: 10px;">
                    Depois de escolher a linha, a função seleciona aleatoriamente uma coluna  
                    dentro dessa linha com <code>random.choice(self.tabuleiro[linha])</code>.  
                    <ul>
                        <li><code>self.tabuleiro[linha]</code> retorna uma lista com as colunas disponíveis nessa linha.</li>
                        <li><code>random.choice()</code> escolhe uma dessas colunas aleatoriamente.</li>
                    </ul>
                </li>
                <li style="margin-bottom: 10px;">
                    A função retorna a posição selecionada como uma tupla <code>(linha, coluna)</code>,  
                    que pode ser usada para posicionar elementos no tabuleiro.
                </li>
            </ul>                                                          
        </div>
        <div class="button-container">
            <button class="back-btn" onclick="window.location.href='index.html'">Voltar à página inicial</button>
            <button class="improve-btn" onclick="window.location.href='tabuleiro_melhorias.html'">Ver melhorias no código</button>
        </div>
    </main>
    <footer>
        <p>&copy; 2025 Relatório de Avaliação - Programação</p>
    </footer>
    <script src="scripts.js"></script>
</body>
</html>
